<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>lovealina</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <style>
    :root{--bg1:#ffedf0;--bg2:#ffe6f2;--card:#fff;--accent:#ff5c8a;--text:#3b2a33}
    .night-mode{--bg1:#0a0a2a;--bg2:#0a0a2a;--card:#1e1e3a;--accent:#ffd700;--text:#e6e6ff}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg1);
      display:flex;align-items:flex-start;justify-content:center;padding:32px;color:var(--text);
      overflow-y:auto;
      min-height:100vh;
      transition: all 0.5s ease;
    }

   /* floating hearts - —Ç–æ–ª—å–∫–æ –≤ –¥–Ω–µ–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ */
    .hearts{position:fixed;inset:0;z-index:1}
    .hearts i{
      position:absolute;
      display:block;
      width:28px;
      height:28px;
      background:var(--accent);
      transform:rotate(45deg);
      border-radius:4px;
      opacity:0.9;
      cursor:pointer;
    }    
    .hearts i:before,.hearts i:after{
      content:'';
      position:absolute;
      width:28px;
      height:28px;
      background:var(--accent);
      border-radius:50%;
    }
    .hearts i:before{top:-14px;left:0}
    .hearts i:after{left:-14px;top:0}
    
    @keyframes heartExplosion {
      0% { transform: scale(1) rotate(45deg); opacity: 1; }
      50% { transform: scale(1.5) rotate(45deg); opacity: 0.7; }
      100% { transform: scale(2) rotate(45deg); opacity: 0; }
    }
    .heart-explode {
      animation: heartExplosion 0.6s ease-out forwards;
      pointer-events: none;
    }

    /* floating stars - —Ç–æ–ª—å–∫–æ –≤ –Ω–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ */
    .stars{position:fixed;inset:0;z-index:1;display:none}
    .night-mode .stars{display:block}
    .stars i{
      position:absolute;
      display:block;
      width:36px;
      height:36px;
      background:#ffd700;
      clip-path: polygon(
        50% 0%,
        61% 35%,
        98% 35%,
        68% 57%,
        79% 91%,
        50% 70%,
        21% 91%,
        32% 57%,
        2% 35%,
        39% 35%
      );
      opacity:0.9;
      cursor:pointer;
      filter: drop-shadow(0 0 8px #ffd700) drop-shadow(0 0 12px #ffd700);
      transition:all 0.3s ease;
    }
    
    @keyframes starExplosion {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.5); opacity: 0.7; }
      100% { transform: scale(2); opacity: 0; }
    }
    .star-explode {
      animation: starExplosion 0.6s ease-out forwards;
      pointer-events: none;
    }

    .card{
      width:min(760px,96vw);
      background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,250,252,0.9));
      border-radius:20px;padding:28px;box-shadow:0 10px 30px rgba(78,30,60,0.12);
      position:relative;z-index:2;backdrop-filter: blur(6px);
      margin:20px 0;
      transition: all 0.5s ease;
    }
    .night-mode .card{
      background:linear-gradient(180deg, rgba(30,30,58,0.9), rgba(26,26,52,0.9));
      box-shadow:0 10px 30px rgba(255,215,0,0.2);
    }
    .header{display:flex;gap:16px;align-items:center}
    .logo{
      width:76px;height:76px;border-radius:18px;background:conic-gradient(from 200deg at 50% 50%, #ffd3e6, #ff9cc0 30%, #ff6b95 60%);
      display:flex;align-items:center;justify-content:center;box-shadow:0 6px 18px rgba(255,110,150,0.15);
      transition: all 0.5s ease;
    }
    .night-mode .logo{
      background:conic-gradient(from 200deg at 50% 50%, #ffd700, #ffed4e 30%, #ffdb58 60%);
      box-shadow:0 6px 18px rgba(255,215,0,0.3);
    }
    .logo svg{width:48px;height:48px;filter:drop-shadow(0 6px 10px rgba(255,110,150,0.12))}
    .night-mode .logo svg{filter:drop-shadow(0 6px 10px rgba(255,215,0,0.3))}
    h1{font-size:1.6rem;margin:0}
    p.lead{margin:8px 0 0;color:var(--text)}

    /* –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ */
    .section {
      background: rgba(255,255,255,0.95);
      border-radius: 15px;
      padding: 20px;
      margin: 15px 0;
      box-shadow: 0 5px 20px rgba(255,92,138,0.1);
      border: 2px dashed rgba(255,92,138,0.3);
      transition: all 0.5s ease;
    }
    .night-mode .section {
      background: rgba(30,30,58,0.95);
      box-shadow: 0 5px 20px rgba(255,215,0,0.2);
      border: 2px dashed rgba(255,215,0,0.4);
    }

    footer{margin-top:18px;color:#774;opacity:0.9;font-size:0.9rem}
    .night-mode footer{color:#a8a8ff}

    /* –ö–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã */
    .compliment-generator {
      text-align: center;
    }

    .compliment-box {
      background: linear-gradient(135deg, #fff0f5, #ffe6f2);
      border-radius: 15px;
      padding: 15px;
      margin: 10px 0;
      border: 2px solid var(--accent);
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      font-weight: 600;
      color: #5b3f47;
      transition: all 0.5s ease;
    }
    .night-mode .compliment-box {
      background: linear-gradient(135deg, #1a1a3a, #2a2a4a);
      color: #e6e6ff;
    }

    .generate-compliment {
      background: linear-gradient(90deg,#ff7aa3,#ff5480);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 5px;
      transition: all 0.5s ease;
    }
    .night-mode .generate-compliment {
      background: linear-gradient(90deg,#ffd700,#ffed4e);
      color: #0a0a2a;
    }

    /* –í–∞–∂–Ω—ã–µ –¥–∞—Ç—ã */
    .dates-section {
      position: relative;
    }
    
    .dates-section h3 {
      margin: 0 0 15px 0;
      text-align: center;
      color: var(--accent);
    }
    
    .calendar-dates-container {
      margin-top: 0;
    }
    
    .calendar-date {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      padding: 10px 0;
      border-bottom: 1px solid rgba(255,200,220,0.5);
      margin: 0;
      transition: all 0.5s ease;
      cursor: pointer;
    }
    .calendar-date:hover {
      background: rgba(255,200,220,0.1);
      border-radius: 8px;
      padding: 10px;
    }
    .night-mode .calendar-date {
      border-bottom: 1px solid rgba(255,215,0,0.3);
    }
    .night-mode .calendar-date:hover {
      background: rgba(255,215,0,0.1);
    }
    
    .calendar-date:last-child {
      border-bottom: none;
    }
    
    .date-event {
      font-weight: 600;
      color: var(--accent);
      flex: 1;
      margin-right: 15px;
      line-height: 1.4;
    }
    
    .date-days {
      color: #888;
      font-size: 0.9rem;
      white-space: nowrap;
      text-align: right;
      min-width: 120px;
      transition: all 0.5s ease;
    }
    .night-mode .date-days {
      color: #a8a8ff;
    }

    /* –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è */
    .achievements-system {
      margin: 0;
    }
    
    .achievements-system h3 {
      margin: 0 0 15px 0;
      text-align: center;
      color: var(--accent);
    }
    
    .achievement {
      display: flex;
      align-items: center;
      padding: 10px;
      margin: 8px 0;
      background: rgba(255,255,255,0.8);
      border-radius: 10px;
      border-left: 4px solid var(--accent);
      transition: all 0.5s ease;
    }
    .night-mode .achievement {
      background: rgba(30,30,58,0.8);
    }
    
    .achievement.unlocked {
      background: linear-gradient(135deg, #a8e6cf, #88d498);
      color: white;
    }
    
    .achievement-icon {
      font-size: 1.5rem;
      margin-right: 10px;
    }
    
    .achievement-text {
      flex: 1;
    }

    /* –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ */
    .planning-calendar {
      margin: 0;
    }
    
    .planning-calendar h3 {
      margin: 0 0 15px 0;
      text-align: center;
      color: var(--accent);
    }
    
    .planning-form {
      display: grid;
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .planning-form input {
      padding: 10px;
      border: 2px solid rgba(255,200,220,0.5);
      border-radius: 8px;
      font-size: 1rem;
      background: white;
      transition: all 0.5s ease;
    }
    .night-mode .planning-form input {
      background: #2a2a4a;
      border: 2px solid rgba(255,215,0,0.3);
      color: #e6e6ff;
    }
    
    .planning-form button {
      background: var(--accent);
      color: white;
      border: none;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
    }
    .night-mode .planning-form button {
      color: #0a0a2a;
    }
    
    .plans-list {
      max-height: 200px;
      overflow-y: auto;
    }
    
    .plan-item {
      padding: 8px;
      margin: 5px 0;
      background: rgba(255,245,247,0.7);
      border-radius: 8px;
      border-left: 3px solid var(--accent);
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.5s ease;
    }
    .night-mode .plan-item {
      background: rgba(42,42,74,0.7);
    }

    .plan-actions {
      display: flex;
      gap: 8px;
    }

    .edit-btn {
      background: linear-gradient(135deg, #a8e6cf, #88d498);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 8px 12px;
      cursor: pointer;
      font-size: 0.9rem;
      min-width: 40px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .delete-btn {
      background: linear-gradient(90deg,#ff7aa3,#ff5480);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 8px 12px;
      cursor: pointer;
      font-size: 0.9rem;
      min-width: 40px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .night-mode .delete-btn {
      background: linear-gradient(90deg,#ffd700,#ffed4e);
      color: #0a0a2a;
    }

    /* –°—á–µ—Ç—á–∏–∫ –¥–Ω–µ–π */
    .days-counter-section {
      text-align: center;
      padding: 30px 20px;
    }
    
    .days-counter {
      font-size: 3.5rem;
      font-weight: 800;
      background: linear-gradient(135deg, #ff6b95, #ff8eb4);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin: 10px 0;
      animation: pulse 2s ease-in-out infinite;
    }
    .night-mode .days-counter {
      background: linear-gradient(135deg, #ffd700, #ffed4e);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .days-text {
      font-size: 1.2rem;
      color: var(--text);
      font-weight: 600;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    /* –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ */
    .theme-toggle {
      position: fixed;
      top: 20px;
      left: 20px;
      background: rgba(255,255,255,0.9);
      padding: 12px;
      border-radius: 50%;
      box-shadow: 0 4px 15px rgba(255,92,138,0.3);
      z-index: 1000;
      font-weight: 600;
      color: var(--accent);
      backdrop-filter: blur(10px);
      border: 2px solid var(--accent);
      cursor: pointer;
      transition: all 0.5s ease;
    }
    .night-mode .theme-toggle {
      background: rgba(30,30,58,0.9);
      box-shadow: 0 4px 15px rgba(255,215,0,0.3);
    }

    /* –°—á–µ—Ç—á–∏–∫–∏ */
    .heart-counter {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255,255,255,0.9);
      padding: 10px 20px;
      border-radius: 25px;
      box-shadow: 0 4px 15px rgba(255,92,138,0.3);
      z-index: 1000;
      font-weight: 600;
      color: var(--accent);
      backdrop-filter: blur(10px);
      border: 2px solid var(--accent);
      transition: all 0.5s ease;
    }
    .night-mode .heart-counter {
      display: none;
    }

    .star-counter {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(30,30,58,0.9);
      padding: 10px 20px;
      border-radius: 25px;
      box-shadow: 0 4px 15px rgba(255,215,0,0.3);
      z-index: 1000;
      font-weight: 600;
      color: #ffd700;
      backdrop-filter: blur(10px);
      border: 2px solid #ffd700;
      transition: all 0.5s ease;
      display: none;
    }
    .night-mode .star-counter {
      display: block;
    }

    #heartCount, #starCount {
      display: inline-block;
      transition: transform 0.3s ease;
      font-weight: 700;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ */
    .photo-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.9);
      z-index: 10000;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.3s ease;
    }

    .photo-modal.active {
      display: flex;
    }

    .modal-content {
      position: relative;
      max-width: 90%;
      max-height: 90%;
      background: var(--card);
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 2px solid var(--accent);
    }

    .modal-title {
      font-size: 1.3rem;
      font-weight: 600;
      color: var(--accent);
      margin: 0;
    }

    .close-modal {
      background: none;
      border: none;
      font-size: 2rem;
      cursor: pointer;
      color: var(--accent);
      padding: 0;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .photo-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      max-height: 70vh;
      overflow-y: auto;
      padding: 10px 0;
    }

    .photo-item {
      position: relative;
      border-radius: 10px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.3s ease;
      aspect-ratio: 4/3;
    }

    .photo-item:hover {
      transform: scale(1.05);
    }

    .photo-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .photo-placeholder {
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--accent);
      font-size: 3rem;
    }

    .no-photos {
      text-align: center;
      padding: 40px;
      color: var(--text);
      font-style: italic;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* Custom scrollbars */
    .plans-list::-webkit-scrollbar {
      width: 8px;
    }
    .plans-list::-webkit-scrollbar-track {
      background: rgba(255, 220, 230, 0.3);
      border-radius: 4px;
    }
    .plans-list::-webkit-scrollbar-thumb {
      background: var(--accent);
      border-radius: 4px;
    }
    .night-mode .plans-list::-webkit-scrollbar-track {
      background: rgba(255,215,0,0.2);
    }

    @media (max-width:520px){
      body{padding:16px}
      .header{gap:10px}
      .logo{width:60px;height:60px}
      .card{padding:18px}
      .planning-form {
        grid-template-columns: 1fr;
      }
      .calendar-date {
        flex-direction: column;
        align-items: flex-start;
        gap: 5px;
      }
      .date-event {
        margin-right: 0;
      }
      .date-days {
        text-align: left;
        min-width: auto;
      }
      .days-counter {
        font-size: 2.5rem;
      }
      .theme-toggle {
        top: 10px;
        left: 10px;
        padding: 10px;
      }
      .heart-counter, .star-counter {
        top: 10px;
        right: 10px;
        padding: 8px 16px;
      }
      .photo-gallery {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 10px;
      }
      .modal-content {
        max-width: 95%;
        max-height: 95%;
        padding: 15px;
      }
      .modal-title {
        font-size: 1.1rem;
      }
    }
  </style>
</head>
<body>
  <div class="hearts" aria-hidden="true"></div>
  <div class="stars" aria-hidden="true"></div>
  <div class="theme-toggle" id="themeToggle">üåô</div>
  <div class="heart-counter">
    üíñ <span id="heartCount">0</span>
  </div>
  <div class="star-counter">
    ‚≠ê <span id="starCount">0</span>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π -->
  <div class="photo-modal" id="photoModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="modalTitle">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å–æ–±—ã—Ç–∏—è</h3>
        <button class="close-modal" id="closeModal">&times;</button>
      </div>
      <div class="photo-gallery" id="photoGallery">
        <!-- –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
      </div>
    </div>
  </div>

  <div class="card" role="main">
    <div class="header">
      <div class="logo" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 21s-6.5-4.35-9-7.1C-0.5 9.5 3 4 7.5 5.5 10 6.5 12 9 12 9s2-2.5 4.5-3.5C21 4 24.5 9.5 21 13.9 18.5 16.65 12 21 12 21z" fill="#fff" opacity="0.12"/><path d="M12 21s-6.5-4.35-9-7.1C-0.5 9.5 3 4 7.5 5.5 10 6.5 12 9 12 9s2-2.5 4.5-3.5C21 4 24.5 9.5 21 13.9 18.5 16.65 12 21 12 21z" stroke="#fff" stroke-width="0.6" fill="transparent"/></svg>
      </div>
      <div>
        <h1>–ú–æ—ë —Å–æ–ª–Ω—Ü–µ!</h1>
        <p class="lead">–≠—Ç–æ —Å—Ç—Ä–∞–Ω–∏—á–∫–∞ –Ω–∞—à–µ–π –∏—Å—Ç–æ—Ä–∏–∏ –ª—é–±–≤–∏</p>
      </div>
    </div>

    <!-- –°—á–µ—Ç—á–∏–∫ –¥–Ω–µ–π –≤–º–µ—Å—Ç–µ -->
    <div class="section days-counter-section">
      <h3>üìÖ –ú—ã –≤–º–µ—Å—Ç–µ —É–∂–µ</h3>
      <div class="days-counter" id="daysCounter">0</div>
      <div class="days-text" id="daysText">–¥–Ω–µ–π —Å—á–∞—Å—Ç—å—è!</div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è 1: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–æ–≤ -->
    <div class="section">
      <div class="compliment-generator">
        <h3>üíù –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–æ–≤</h3>
        <button class="generate-compliment" id="generateCompliment">
          –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç ‚ú®
        </button>
        <div class="compliment-box" id="complimentText">
          –ó–¥–µ—Å—å —Ç–∞–∏—Ç—Å—è –º–æ—è –ª—é–±–æ–≤—å üíù
        </div>
      </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è 2: –í–∞–∂–Ω—ã–µ –¥–∞—Ç—ã -->
    <div class="section dates-section">
      <h3>üìÖ –ù–∞—à–∏ –≤–∞–∂–Ω—ã–µ –¥–∞—Ç—ã</h3>
      <div class="calendar-dates-container" id="calendarDates">
        <!-- –î–∞—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
      </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è 3: –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è -->
    <div class="section">
      <div class="achievements-system">
        <h3>üèÜ –ù–∞—à–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
        <div id="achievementsList">
          <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </div>
      </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è 4: –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ -->
    <div class="section">
      <div class="planning-calendar">
        <h3>üìù –ü–ª–∞–Ω–∏—Ä—É–µ–º –≤–º–µ—Å—Ç–µ</h3>
        <div class="planning-form">
          <input type="text" id="planTitle" placeholder="–ß—Ç–æ –ø–ª–∞–Ω–∏—Ä—É–µ–º?">
          <input type="date" id="planDate">
          <input type="time" id="planTime">
          <button id="addPlan">–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</button>
        </div>
        <div class="plans-list" id="plansList">
          <!-- –ü–ª–∞–Ω—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–¥–µ—Å—å -->
        </div>
      </div>
    </div>

    <footer>–° –ª—é–±–æ–≤—å—é –¥–ª—è —Ç–µ–±—è ‚ù§Ô∏è</footer>
  </div>

  <script>
   // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyAH3npLbbeBsqv7KA0t9AvZ5lCw3M3jIYU",
    authDomain: "lovealina-planner.firebaseapp.com",
    databaseURL: "https://lovealina-planner-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "lovealina-planner",
    storageBucket: "lovealina-planner.firebasestorage.app",
    messagingSenderId: "135195507622",
    appId: "1:135195507622:web:f66dfd17afecda97456d67"
  };

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
firebase.initializeApp(firebaseConfig);
const database = firebase.database();

let heartExplosionCount = 0;
let starExplosionCount = 0;
const heartCountElement = document.getElementById('heartCount');
const starCountElement = document.getElementById('starCount');
let isNightMode = false;

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
function getDeviceId() {
  let deviceId = localStorage.getItem('deviceId');
  if (!deviceId) {
    // –°–æ–∑–¥–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π ID –∏–∑ 12 —Å–∏–º–≤–æ–ª–æ–≤
    deviceId = 'device_' + Math.random().toString(36).substr(2, 9) + Date.now().toString(36).substr(4, 3);
    localStorage.setItem('deviceId', deviceId);
  }
  return deviceId;
}

// –ó–∞–≥—Ä—É–∑–∫–∞ —Å—á–µ—Ç—á–∏–∫–æ–≤ –∏–∑ localStorage –¥–ª—è —ç—Ç–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
function loadCounters() {
  const deviceId = getDeviceId();
  heartExplosionCount = parseInt(localStorage.getItem(`heartCount_${deviceId}`)) || 0;
  starExplosionCount = parseInt(localStorage.getItem(`starCount_${deviceId}`)) || 0;
  
  heartCountElement.textContent = heartExplosionCount;
  starCountElement.textContent = starExplosionCount;
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤ –≤ localStorage –¥–ª—è —ç—Ç–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
function saveCounters() {
  const deviceId = getDeviceId();
  localStorage.setItem(`heartCount_${deviceId}`, heartExplosionCount);
  localStorage.setItem(`starCount_${deviceId}`, starExplosionCount);
}

// –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—á–µ—Ç—á–∏–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
loadCounters();

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Å—Ç–∏—Ü –ø—Ä–∏ –≤–∑—Ä—ã–≤–µ —Å–µ—Ä–¥—Ü–∞
  function createHeartParticles(rect) {
    const particleCount = 8;
    for (let i = 0; i < particleCount; i++) {
      const particle = document.createElement('div');
      particle.style.cssText = `
        position: fixed;
        width: 6px;
        height: 6px;
        background: var(--accent);
        border-radius: 50%;
        left: ${rect.left + rect.width/2}px;
        top: ${rect.top + rect.height/2}px;
        pointer-events: none;
        z-index: 1000;
      `;
      
      const angle = (i / particleCount) * Math.PI * 2;
      const distance = 30 + Math.random() * 40;
      const duration = 0.8 + Math.random() * 0.4;
      
      particle.style.transition = `all ${duration}s ease-out`;
      document.body.appendChild(particle);
      
      requestAnimationFrame(() => {
        particle.style.transform = `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px)`;
        particle.style.opacity = '0';
      });
      
      setTimeout(() => particle.remove(), duration * 1000);
    }
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Å—Ç–∏—Ü –ø—Ä–∏ –≤–∑—Ä—ã–≤–µ –∑–≤–µ–∑–¥—ã
  function createStarParticles(rect) {
    const particleCount = 12;
    for (let i = 0; i < particleCount; i++) {
      const particle = document.createElement('div');
      particle.style.cssText = `
        position: fixed;
        width: 6px;
        height: 6px;
        background: #ffd700;
        border-radius: 50%;
        left: ${rect.left + rect.width/2}px;
        top: ${rect.top + rect.height/2}px;
        pointer-events: none;
        z-index: 1000;
        box-shadow: 0 0 8px #ffd700;
      `;
      
      const angle = (i / particleCount) * Math.PI * 2;
      const distance = 40 + Math.random() * 60;
      const duration = 0.8 + Math.random() * 0.4;
      
      particle.style.transition = `all ${duration}s ease-out`;
      document.body.appendChild(particle);
      
      requestAnimationFrame(() => {
        particle.style.transform = `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px)`;
        particle.style.opacity = '0';
      });
      
      setTimeout(() => particle.remove(), duration * 1000);
    }
  }

  // –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–¥–µ—á–µ–∫ (—Ç–æ–ª—å–∫–æ –≤ –¥–Ω–µ–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ)
  const heartsRoot = document.querySelector('.hearts');
  function makeHeart(i){
    const el = document.createElement('i');
    const left = Math.random() * 100; 
    const top = -10 - Math.random()*30;
    
    el.style.left = left + 'vw'; 
    el.style.top = top + 'vh';
    
    const dur = 10 + Math.random()*15;
    el.style.transition = `transform ${dur}s linear, top ${dur}s linear, opacity ${dur}s linear`;
    heartsRoot.appendChild(el);
    
    el.addEventListener('click', function() {
  this.style.pointerEvents = 'none';
  this.classList.add('heart-explode');
  
  // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Å–µ—Ä–¥–µ—á–µ–∫
  heartExplosionCount++;
  heartCountElement.textContent = heartExplosionCount;
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –¥–ª—è —ç—Ç–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
  saveCounters();
  
  // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∫ —Å—á–µ—Ç—á–∏–∫—É
  heartCountElement.style.transform = 'scale(1.3)';
  setTimeout(() => {
    heartCountElement.style.transform = 'scale(1)';
  }, 300);
  
  createHeartParticles(this.getBoundingClientRect());
  setTimeout(() => {
    if (this.parentElement) {
      this.parentElement.removeChild(this);
    }
  }, 800);
});
    
    requestAnimationFrame(()=>{
      el.style.transform = `translateY(${110 + Math.random()*30}vh) scale(${0.8+Math.random()*0.6}) rotate(${(Math.random()-0.5)*60}deg)`;
      el.style.opacity = 0;
    });
    setTimeout(()=>el.remove(), (dur+0.5)*1000);
  }

  // –°–æ–∑–¥–∞–Ω–∏–µ –∑–≤–µ–∑–¥ (—Ç–æ–ª—å–∫–æ –≤ –Ω–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ)
  const starsRoot = document.querySelector('.stars');
  function makeStar(i){
    const el = document.createElement('i');
    const left = Math.random() * 100; 
    const top = -10 - Math.random()*30;
    
    el.style.left = left + 'vw'; 
    el.style.top = top + 'vh';
    
    const dur = 15 + Math.random()*20;
    el.style.transition = `transform ${dur}s linear, top ${dur}s linear, opacity ${dur}s linear`;
    starsRoot.appendChild(el);
    
    el.addEventListener('click', function() {
  this.style.pointerEvents = 'none';
  this.classList.add('star-explode');
  
  // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∑–≤–µ–∑–¥
  starExplosionCount++;
  starCountElement.textContent = starExplosionCount;
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –¥–ª—è —ç—Ç–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
  saveCounters();
  
  // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∫ —Å—á–µ—Ç—á–∏–∫—É
  starCountElement.style.transform = 'scale(1.3)';
  setTimeout(() => {
    starCountElement.style.transform = 'scale(1)';
  }, 300);
  
  createStarParticles(this.getBoundingClientRect());
  setTimeout(() => {
    if (this.parentElement) {
      this.parentElement.removeChild(this);
    }
  }, 800);
});
    
    requestAnimationFrame(()=>{
      el.style.transform = `translateY(${120 + Math.random()*40}vh) rotate(${(Math.random()-0.5)*180}deg)`;
      el.style.opacity = 0;
    });
    setTimeout(()=>el.remove(), (dur+0.5)*1000);
  }
  
  // –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–¥–µ—á–µ–∫ –≤ –¥–Ω–µ–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ
  function startHearts() {
    setInterval(()=>{ 
      if (!isNightMode) {
        for(let i=0;i<3;i++) makeHeart(); 
      }
    }, 800);
  }

  // –°–æ–∑–¥–∞–Ω–∏–µ –∑–≤–µ–∑–¥ –≤ –Ω–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ
  function startStars() {
    setInterval(()=>{ 
      if (isNightMode) {
        for(let i=0;i<2;i++) makeStar(); 
      }
    }, 1000);
  }

  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
  document.getElementById('themeToggle').addEventListener('click', function() {
    isNightMode = !isNightMode;
    document.body.classList.toggle('night-mode', isNightMode);
    this.textContent = isNightMode ? '‚òÄÔ∏è' : 'üåô';
    
    if (isNightMode) {
      heartsRoot.innerHTML = '';
      for(let i=0;i<15;i++) makeStar();
    } else {
      starsRoot.innerHTML = '';
      for(let i=0;i<10;i++) makeHeart();
    }
  });

  // –°—á–µ—Ç—á–∏–∫ –¥–Ω–µ–π –≤–º–µ—Å—Ç–µ
  function updateDaysCounter() {
    const startDate = new Date('2023-06-01');
    const today = new Date();
    const daysTogether = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
    
    const daysCounter = document.getElementById('daysCounter');
    const daysText = document.getElementById('daysText');
    
    daysCounter.textContent = daysTogether;
    
    const lastDigit = daysTogether % 10;
    const lastTwoDigits = daysTogether % 100;
    
    let dayText = '–¥–Ω–µ–π';
    if (lastTwoDigits >= 11 && lastTwoDigits <= 14) {
      dayText = '–¥–Ω–µ–π';
    } else if (lastDigit === 1) {
      dayText = '–¥–µ–Ω—å';
    } else if (lastDigit >= 2 && lastDigit <= 4) {
      dayText = '–¥–Ω—è';
    }
    
    daysText.textContent = `${dayText} —Å—á–∞—Å—Ç—å—è!`;
    
    if (daysTogether % 100 === 0) {
      daysText.textContent += ` üéâ –Æ–±–∏–ª–µ–π!`;
    } else if (daysTogether % 365 === 0) {
      const years = daysTogether / 365;
      daysText.textContent += ` üéÇ ${years} –≥–æ–¥${years > 1 ? '–∞' : ''} –≤–º–µ—Å—Ç–µ!`;
    }
    
    renderAchievements();
  }

  // –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–æ–≤
  const compliments = [
    "–¢—ã —Å–∞–º–æ–µ –∫—Ä–∞—Å–∏–≤–æ–µ, —á—Ç–æ —Å–ª—É—á–∞–ª–æ—Å—å –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏! üå∏",
    "–¢–≤–æ—è —É–ª—ã–±–∫–∞ –¥–µ–ª–∞–µ—Ç –º–æ–π –¥–µ–Ω—å —è—Ä—á–µ! ‚ú®",
    "–Ø —Å–∫—É—á–∞—é –ø–æ —Ç–µ–±–µ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É! üí´",
    "–¢—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –º–µ–Ω—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –ª—É—á—à–µ! üöÄ",
    "–° —Ç–æ–±–æ–π –¥–∞–∂–µ –æ–±—ã—á–Ω—ã–π –¥–µ–Ω—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º! üéâ",
    "–¢–≤–æ–∏ –≥–ª–∞–∑–∞ - –º–æ—è –ª—é–±–∏–º–∞—è –≤—Å–µ–ª–µ–Ω–Ω–∞—è! üåå",
    "–¢—ã –¥–µ–ª–∞–µ—à—å –º–µ–Ω—è —Å–∞–º—ã–º —Å—á–∞—Å—Ç–ª–∏–≤—ã–º —á–µ–ª–æ–≤–µ–∫–æ–º! üòä",
    "–ö–∞–∂–¥–∞—è –º–∏–Ω—É—Ç–∞ —Å —Ç–æ–±–æ–π - –ø–æ–¥–∞—Ä–æ–∫ —Å—É–¥—å–±—ã! üéÅ",
    "–¢–≤–æ—è –¥–æ–±—Ä–æ—Ç–∞ —Å–æ–≥—Ä–µ–≤–∞–µ—Ç –º–æ–µ —Å–µ—Ä–¥—Ü–µ! üî•",
    "–¢—ã –∏–¥–µ–∞–ª—å–Ω–∞ –≤–æ –≤—Å–µ–º! üíé",
    "–ú–æ–µ —Å–µ—Ä–¥—Ü–µ –±—å–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–±—è! üíì",
    "–¢—ã –º–æ—è —Å–∞–º–∞—è –±–æ–ª—å—à–∞—è –º–µ—á—Ç–∞! üå†",
    "–° —Ç–æ–±–æ–π —è —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ –º–æ–≥—É –≤—Å—ë! üí™",
    "–¢—ã - –ø—Ä–∏—á–∏–Ω–∞ –º–æ–µ–π —É–ª—ã–±–∫–∏! üòÑ",
    "–õ—é–±–æ–≤—å –∫ —Ç–µ–±–µ –¥–µ–ª–∞–µ—Ç –º–µ–Ω—è —Å–∏–ª—å–Ω–µ–µ! üõ°Ô∏è"
  ];

  document.getElementById('generateCompliment').addEventListener('click', function() {
    const randomCompliment = compliments[Math.floor(Math.random() * compliments.length)];
    document.getElementById('complimentText').textContent = randomCompliment;
  });

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã –≤ –¥–¥.–º–º.–≥–≥–≥–≥
  function formatDate(dateString) {
    const [year, month, day] = dateString.split('-');
    return `${day}.${month}.${year}`;
  }

  // –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å–æ–±—ã—Ç–∏–π —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏
  const importantDates = [
    { 
      date: '2023-06-01', 
      event: 'üå± –î–µ–Ω—å, –∫–æ–≥–¥–∞ –Ω–∞—à–∏ —Å–µ—Ä–¥—Ü–∞ –Ω–∞—à–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞', 
      days: '–ü–µ—Ä–≤—ã–π –¥–µ–Ω—å',
      photos: [
        'https://images.unsplash.com/photo-1518568814500-bf0f8d125f46?w=400&h=300&fit=crop',
        'https://images.unsplash.com/photo-1518495973542-4542c06a5843?w=400&h=300&fit=crop',
        'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400&h=300&fit=crop'
      ]
    },
    { 
      date: '2023-06-04', 
      event: 'üè∞ –ò–Ω–Ω–æ–ø–æ–ª–∏—Å –∏ –°–≤–∏—è–∂—Å–∫ - –ø–µ—Ä–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞—à–µ–π –∫–Ω–∏–≥–∏', 
      days: '4 –¥–Ω—è',
      photos: [
        'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop',
        'https://images.unsplash.com/photo-1494790108755-2616b612b786?w=400&h=300&fit=crop'
      ]
    },
    { 
      date: '2023-07-15', 
      event: 'üöù –ò–∂–µ–≤—Å–∫ —Å—Ç–∞–ª —Å–≤–∏–¥–µ—Ç–µ–ª–µ–º –Ω–∞—à–∏—Ö —á—É–≤—Å—Ç–≤', 
      days: '45 –¥–Ω–µ–π',
      photos: [
        'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=400&h=300&fit=crop',
        'https://images.unsplash.com/photo-1506634572416-48cdfe530110?w=400&h=300&fit=crop'
      ]
    },
    { 
      date: '2024-01-22', 
      event: 'üî• –ù–µ–∑–∞–±—ã–≤–∞–µ–º—ã–π –≥–ª—ç–º–ø–∏–Ω–≥ —Å –¥—Ä—É–∑—å—è–º–∏', 
      days: '235 –¥–Ω–µ–π',
      photos: [
        'https://images.unsplash.com/photo-1511988617509-a57c8a288659?w=400&h=300&fit=crop'
      ]
    },
    { 
      date: '2024-02-07', 
      event: '‚ùÑÔ∏è –ó–∏–º–Ω—è—è –ú–æ—Å–∫–≤–∞ –∑–∞—Å—Ç–∞–≤–ª—è–ª–∞ –Ω–∞—Å —É–ª—ã–±–∞—Ç—å—Å—è', 
      days: '251 –¥–µ–Ω—å',
      photos: [] // –ù–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
    },
    { 
      date: '2024-03-24', 
      event: 'üè° –î–µ–Ω—å, –∫–æ–≥–¥–∞ "—è" –∏ "—Ç—ã" —Å—Ç–∞–ª–∏ "–º—ã"', 
      days: '297 –¥–Ω–µ–π',
      photos: [
        'https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=400&h=300&fit=crop',
        'https://images.unsplash.com/photo-1494790108755-2616b612b786?w=400&h=300&fit=crop',
        'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop'
      ]
    },
    { 
      date: '2024-06-01', 
      event: 'üéÇ 365 –≤–æ—Å—Ö–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —è –≤—Å—Ç—Ä–µ—á–∞–ª —Å –º—ã—Å–ª—è–º–∏ –æ —Ç–µ–±–µ', 
      days: '365 –¥–Ω–µ–π',
      photos: [
        'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400&h=300&fit=crop'
      ]
    },
    { 
      date: '2024-09-02', 
      event: '‚õ∞Ô∏è –ö–∞–≤–∫–∞–∑—Å–∫–∏–µ –≥–æ—Ä—ã —Å–∫–ª–æ–Ω–∏–ª–∏—Å—å –ø–µ—Ä–µ–¥ –Ω–∞—à–µ–π –ª—é–±–æ–≤—å—é', 
      days: '459 –¥–Ω–µ–π',
      photos: [
        'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop'
      ]
    }
  ];

  // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–æ–º
  function openPhotoModal(eventTitle, photos) {
    const modal = document.getElementById('photoModal');
    const modalTitle = document.getElementById('modalTitle');
    const photoGallery = document.getElementById('photoGallery');
    
    modalTitle.textContent = eventTitle;
    photoGallery.innerHTML = '';
    
    if (photos && photos.length > 0) {
      photos.forEach(photoUrl => {
        const photoItem = document.createElement('div');
        photoItem.className = 'photo-item';
        photoItem.innerHTML = `
          <img src="${photoUrl}" alt="${eventTitle}" loading="lazy">
        `;
        photoGallery.appendChild(photoItem);
      });
    } else {
      photoGallery.innerHTML = `
        <div class="no-photos">
          <div class="photo-placeholder">üì∑</div>
          <p style="margin-top: 10px;">–ü–æ–∫–∞ –Ω–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –¥–ª—è —ç—Ç–æ–≥–æ —Å–æ–±—ã—Ç–∏—è</p>
        </div>
      `;
    }
    
    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  function closePhotoModal() {
    const modal = document.getElementById('photoModal');
    modal.classList.remove('active');
    document.body.style.overflow = 'auto';
  }

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
  document.getElementById('closeModal').addEventListener('click', closePhotoModal);
  
  // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  document.getElementById('photoModal').addEventListener('click', function(e) {
    if (e.target === this) {
      closePhotoModal();
    }
  });
  
  // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ ESC
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      closePhotoModal();
    }
  });

  function renderCalendar() {
    const calendarContainer = document.getElementById('calendarDates');
    calendarContainer.innerHTML = '';
    
    importantDates.forEach(item => {
      const dateElement = document.createElement('div');
      dateElement.className = 'calendar-date';
      dateElement.style.cursor = 'pointer';
      dateElement.addEventListener('click', () => {
        openPhotoModal(item.event, item.photos);
      });
      
      dateElement.innerHTML = `
        <span class="date-event">${item.event}</span>
        <span class="date-days">${formatDate(item.date)} (${item.days})</span>
      `;
      calendarContainer.appendChild(dateElement);
    });
  }

  // –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
  const achievements = [
    { days: 1, desc: '–°—Ç–∞—Ä—Ç –≤–µ–ª–∏–∫–æ–≥–æ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è!', icon: 'üå±', unlocked: true },
    { days: 7, desc: '–ü–µ—Ä–≤–∞—è –Ω–µ–¥–µ–ª—è –≤–º–µ—Å—Ç–µ!', icon: 'üåº', unlocked: true },
    { days: 30, desc: '–ü–µ—Ä–≤—ã–π –º–µ—Å—è—Ü –ª—é–±–≤–∏', icon: 'üíù', unlocked: true },
    { days: 100, desc: '–°–æ—Ç–Ω—è –¥–Ω–µ–π —Å—á–∞—Å—Ç—å—è!', icon: 'üéØ', unlocked: true },
    { days: 182, desc: '–ü–æ–ª–≥–æ–¥–∞ –≤–º–µ—Å—Ç–µ!', icon: 'üåü', unlocked: true },
    { days: 365, desc: '–¶–µ–ª—ã–π –≥–æ–¥ –ª—é–±–≤–∏!', icon: 'üéâ', unlocked: true },
    { days: 500, desc: '500 –¥–Ω–µ–π –Ω–µ–∂–Ω–æ—Å—Ç–∏', icon: 'üí´', unlocked: false },
    { days: 730, desc: '–î–≤–∞ –≥–æ–¥–∞ –≤–º–µ—Å—Ç–µ!', icon: 'üèÜ', unlocked: false },
    { days: 1000, desc: '–¢—ã—Å—è—á–∞ –¥–Ω–µ–π —Å—á–∞—Å—Ç—å—è', icon: 'üíñ', unlocked: false }
  ];

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–ª–∞–Ω–æ–≤ (—Å —ç–º–æ–¥–∑–∏)
  function getDaysText(days) {
    if (days < 0) return '‚ùå –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ';
    if (days === 0) return 'üéØ –°–µ–≥–æ–¥–Ω—è!';
    if (days === 1) return 'üìÖ –ó–∞–≤—Ç—Ä–∞';
    
    const lastDigit = days % 10;
    const lastTwoDigits = days % 100;
    
    if (lastTwoDigits >= 11 && lastTwoDigits <= 14) {
      return `‚è≥ –ß–µ—Ä–µ–∑ ${days} –¥–Ω–µ–π`;
    }
    if (lastDigit === 1) {
      return `‚è≥ –ß–µ—Ä–µ–∑ ${days} –¥–µ–Ω—å`;
    }
    if (lastDigit >= 2 && lastDigit <= 4) {
      return `‚è≥ –ß–µ—Ä–µ–∑ ${days} –¥–Ω—è`;
    }
    return `‚è≥ –ß–µ—Ä–µ–∑ ${days} –¥–Ω–µ–π`;
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (—Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç)
  function getDaysTextForAchievements(days) {
    const lastDigit = days % 10;
    const lastTwoDigits = days % 100;
    
    if (lastTwoDigits >= 11 && lastTwoDigits <= 14) {
      return '–¥–Ω–µ–π';
    }
    if (lastDigit === 1) {
      return '–¥–µ–Ω—å';
    }
    if (lastDigit >= 2 && lastDigit <= 4) {
      return '–¥–Ω—è';
    }
    return '–¥–Ω–µ–π';
  }

  function renderAchievements() {
    const startDate = new Date('2023-06-01');
    const today = new Date();
    const daysTogether = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
    
    console.log('–î–Ω–µ–π –≤–º–µ—Å—Ç–µ:', daysTogether);
    
    const achievementsContainer = document.getElementById('achievementsList');
    achievementsContainer.innerHTML = '';
    
    achievements.forEach(achievement => {
      const isUnlocked = daysTogether >= achievement.days;
      const achievementElement = document.createElement('div');
      achievementElement.className = `achievement ${isUnlocked ? 'unlocked' : ''}`;
      
      let progressText = '';
      if (!isUnlocked && daysTogether > 0) {
        const progress = Math.min(100, (daysTogether / achievement.days) * 100);
        progressText = `<div style="margin-top: 5px; font-size: 0.8rem; color: #666;">
          –ü—Ä–æ–≥—Ä–µ—Å—Å: ${Math.floor(progress)}% (${daysTogether}/${achievement.days} –¥–Ω–µ–π)
        </div>`;
      }
      
      achievementElement.innerHTML = `
        <div class="achievement-icon">${achievement.icon}</div>
        <div class="achievement-text">
          <div class="achievement-desc">${achievement.desc}</div>
          ${progressText}
        </div>
        <div>${achievement.days} ${getDaysTextForAchievements(achievement.days)}</div>
      `;
      achievementsContainer.appendChild(achievementElement);
    });
  }

  // –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
  let plans = [];
  let editingIndex = null;

  function renderPlans() {
    const plansContainer = document.getElementById('plansList');
    console.log('–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø–ª–∞–Ω–æ–≤:', plans);
    
    plansContainer.innerHTML = '';
    
    if (plans.length === 0) {
      plansContainer.innerHTML = '<div style="text-align: center; padding: 20px; color: #888;">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π</div>';
      return;
    }
    
    // –°–û–†–¢–ò–†–û–í–ö–ê: –æ—Ç –±–ª–∏–∂–∞–π—à–µ–π –¥–∞—Ç—ã –∫ —Å–∞–º–æ–π –ø–æ–∑–¥–Ω–µ–π
    const sortedPlans = [...plans].sort((a, b) => {
      try {
        const dateA = new Date(a.date + (a.time ? 'T' + a.time : ''));
        const dateB = new Date(b.date + (b.time ? 'T' + b.time : ''));
        return dateA - dateB;
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –¥–∞—Ç:', error);
        return 0;
      }
    });
    
    console.log('–û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–∞–Ω—ã:', sortedPlans);
    
    sortedPlans.forEach((plan, index) => {
      const originalIndex = plans.indexOf(plan);
      const planElement = document.createElement('div');
      planElement.className = 'plan-item';
      
      // –î–æ–±–∞–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É —Å—Ä–æ—á–Ω–æ—Å—Ç–∏ –¥–ª—è –±–ª–∏–∂–∞–π—à–∏—Ö —Å–æ–±—ã—Ç–∏–π
      const today = new Date();
      const planDate = new Date(plan.date + (plan.time ? 'T' + plan.time : ''));
      const daysDiff = Math.ceil((planDate - today) / (1000 * 60 * 60 * 24));
      
      let urgencyIcon = '';
      if (daysDiff === 0) {
        urgencyIcon = 'üö® '; // —Å–µ–≥–æ–¥–Ω—è
      } else if (daysDiff === 1) {
        urgencyIcon = '‚ö†Ô∏è '; // –∑–∞–≤—Ç—Ä–∞
      } else if (daysDiff <= 7) {
        urgencyIcon = 'üìå '; // –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏
      }
      
      const displayTime = plan.time ? ` –≤ ${plan.time}` : '';
      const formattedDate = formatDate(plan.date);
      
      planElement.innerHTML = `
        <div>
          <strong>${urgencyIcon}${plan.title}</strong> - ${formattedDate}${displayTime}
          ${daysDiff !== null && !isNaN(daysDiff) ? `<div style="font-size: 0.8rem; color: #666; margin-top: 2px;">${getDaysText(daysDiff)}</div>` : ''}
        </div>
        <div class="plan-actions">
          <button class="edit-btn" onclick="editPlan(${originalIndex})">‚úèÔ∏è</button>
          <button class="delete-btn" onclick="removePlan(${originalIndex})">√ó</button>
        </div>
      `;
      plansContainer.appendChild(planElement);
    });
  }

  function addPlan() {
    const title = document.getElementById('planTitle').value.trim();
    const date = document.getElementById('planDate').value;
    const time = document.getElementById('planTime').value;
    
    console.log('–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–∞:', { title, date, time });
    
    if (title && date) {
      if (editingIndex !== null) {
        console.log('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ —Å –∏–Ω–¥–µ–∫—Å–æ–º:', editingIndex);
        plans[editingIndex] = { title, date, time };
        editingIndex = null;
        document.getElementById('addPlan').textContent = '–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ';
      } else {
        console.log('–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∞');
        plans.push({ title, date, time });
      }
      
      renderPlans();
      savePlansToFirebase();
      
      document.getElementById('planTitle').value = '';
      document.getElementById('planDate').value = '';
      document.getElementById('planTime').value = '';
      
      console.log('–ü–ª–∞–Ω –¥–æ–±–∞–≤–ª–µ–Ω, —Ç–µ–∫—É—â–∏–µ –ø–ª–∞–Ω—ã:', plans);
    } else {
      alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –¥–∞—Ç—É —Å–æ–±—ã—Ç–∏—è');
    }
  }

  function editPlan(index) {
    const plan = plans[index];
    document.getElementById('planTitle').value = plan.title;
    document.getElementById('planDate').value = plan.date;
    document.getElementById('planTime').value = plan.time || '';
    editingIndex = index;
    document.getElementById('addPlan').textContent = '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è';
    document.getElementById('planTitle').scrollIntoView({behavior: 'smooth'});
  }

  function removePlan(index) {
    if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ?')) {
      plans.splice(index, 1);
      savePlansToFirebase();
    }
  }

  // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–∞–Ω–æ–≤ –∏–∑ Firebase
  function loadPlansFromFirebase() {
    console.log('–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–∞–Ω–æ–≤ –∏–∑ Firebase...');
    const plansRef = database.ref('plans');
    plansRef.on('value', (snapshot) => {
      const data = snapshot.val();
      console.log('–î–∞–Ω–Ω—ã–µ –∏–∑ Firebase:', data);
      if (data) {
        plans = Object.values(data);
        console.log('–ü–ª–∞–Ω—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã:', plans);
        renderPlans();
      } else {
        plans = [];
        console.log('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ Firebase');
        renderPlans();
      }
    }, (error) => {
      console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ Firebase:', error);
    });
  }

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤ –≤ Firebase
  function savePlansToFirebase() {
    console.log('–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤ –≤ Firebase:', plans);
    const plansRef = database.ref('plans');
    
    const plansObject = {};
    plans.forEach((plan, index) => {
      plansObject[index] = plan;
    });
    
    plansRef.set(plansObject)
      .then(() => {
        console.log('–ü–ª–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ Firebase');
      })
      .catch((error) => {
        console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–ª–∞–Ω–æ–≤:', error);
        alert('–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: ' + error.message);
      });
  }

  document.getElementById('addPlan').addEventListener('click', addPlan);

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  document.addEventListener('DOMContentLoaded', function() {
    updateDaysCounter();
    renderCalendar();
    renderAchievements();
    loadPlansFromFirebase();
    
    startHearts();
    startStars();
    
    for(let i=0;i<10;i++) makeHeart();
    
    setInterval(updateDaysCounter, 24 * 60 * 60 * 1000);
    window.editPlan = editPlan;
    window.removePlan = removePlan;
  });
  </script>
</body>
</html>
